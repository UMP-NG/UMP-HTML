<!doctype html>
<html>
<body>
  <h1>Forgot Password</h1>
  <form id="forgot">
    <input name="email" placeholder="Email" required />
    <button>Send reset link</button>
  </form>
  <p id="msg"></p>

  <script type="module">
    import API from "./js/api.js";
    const form = document.getElementById("forgot");
    const msg = document.getElementById("msg");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      msg.textContent = "Requesting...";
      try {
        const res = await API.forgotPassword({email: form.email.value.trim()});
        msg.textContent = "Reset link generated. Check email.";
        console.log("DEV resetUrl:", res.resetUrl);
      } catch (err) {
        msg.textContent = err.body?.message || err.message;
      }
    });
  </script>
</body>
</html>
